---
import BaseLayout from '../../layouts/BaseLayout.astro';


export async function getStaticPaths() {
const allPosts = await Astro.glob('../posts/*.md');

const uniqueTags = [...new Set(allPosts.map((post) => post.frontmatter.tags).flat())];

return uniqueTags.map((tag) => {
  const filteredPosts = allPosts.filter((post) => post.frontmatter.tags.includes(tag));
  return {
    params: { tag },
    props: { posts: filteredPosts },
  };
});
}
const { tag } = Astro.params;
const { posts } = Astro.props;
const filteredPosts = posts.filter((post) => post.frontmatter.tags?.includes(tag));

const pageTitle = tag + " | Tags";

---
<BaseLayout pageTitle={pageTitle}>

      <section id="allposts">
        <div id="Title_Container">
            <h2 class="Page_Title">{pageTitle}</h2>  
            <div>Posts tagged with {tag}</div> 
        </div>
        <article id="All_Posts">
            <ul>
                {posts.map((post) => <li><a href={post.url}> {post.frontmatter.title}</li></a>)}
            </ul>
        </article>
    </section>
</BaseLayout>